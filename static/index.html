<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Push-up counter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Tektur&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://unpkg.com/htmx.org@1.9.4"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js" charset="utf-8"></script>
  </head>
  <body>
    <nav>
      <a href="/account">Account</a>
    </nav>
    <main>
    <h1>Push-up counter</h1>
    <div class="stack">
      <div class="item grid gap-2 py-2">
        <div>
          <canvas id="chart" />
        </div>
        <div id="series" class="series"></div>
      </div>
      <div class="tab tab-1">
        <input type="radio" id="1" name="tabs" value="1" checked />
        <label for="1">Chart</label>
      </div>
      <div class="item">
        <h2>Submission form</h2>
        <form class="submission" hx-post="/log" hx-swap="outerHTML">
          <select name="activity" id="activity" hx-get="/activity" hx-target="#activity-form"
                  hx-trigger="load, change"
                  hx-swap="innerHTML"
                  hx-indicator="#indicator">
            <option value="push-up">
              Push-up
            </option>
            <option value="plank">
              Plank
            </option>
          </select>
          <div id="indicator" class="htmx-indicator">Loading...</div>
          <div id="activity-form"></div>
          <button type="submit">Submit session</button>
        </form>
      </div>
      <div class="tab tab-2">
        <input type="radio" id="2" name="tabs" value="2" />
        <label for="2">Record</label>
      </div>
      <div class="item">
        <h3>Previous sessions</h3>
        <ul id="sessions"></ul>
      </div>
      <div class="tab tab-3">
        <input type="radio" id="3" name="tabs" value="3" />
        <label for="3">Log</label>
      </div>
    </div>
    </main>
    <script type="module">
      import "./script.js";
    </script>
    <script>
	const el = document.getElementById('series');
	const data = [{
	x: [1, 2, 3, 4, 5],
	y: [1, 2, 4, 8, 16] }];
	const layout = {
	  plot_bgcolor: "transparent",
	  paper_bgcolor: "transparent",
	  margin: {
            t: 5,
	    b: 5,
	    l: 1,
	    r: 1
	  }
	};
	const config = { responsive: true};
	Plotly.newPlot(el, data, layout, config);
</script>
  </body>
</html>
